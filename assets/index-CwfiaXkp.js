(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const c={sel:null,addBtn:null,cartDisp:null,sum:null,stockInfo:null,lastSel:null,totalAmt:0,itemCnt:0,bonusPts:0,productList:[]},g=[{id:"p1",name:"ÏÉÅÌíà1",val:1e4,q:50},{id:"p2",name:"ÏÉÅÌíà2",val:2e4,q:30},{id:"p3",name:"ÏÉÅÌíà3",val:3e4,q:20},{id:"p4",name:"ÏÉÅÌíà4",val:15e3,q:0},{id:"p5",name:"ÏÉÅÌíà5",val:25e3,q:10}];function x(){const n=document.getElementById("app"),a=document.createElement("div"),s=document.createElement("div"),o=document.createElement("h1"),t=document.createElement("div"),e=document.createElement("div"),l=document.createElement("select"),i=document.createElement("button"),d=document.createElement("div");return t.id="cart-items",e.id="cart-total",l.id="product-select",i.id="add-to-cart",d.id="stock-status",a.className="bg-gray-100 p-8",s.className="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl p-8",o.className="text-2xl font-bold mb-4",e.className="text-xl font-bold my-4",l.className="border rounded p-2 mr-2",i.className="bg-blue-500 text-white px-4 py-2 rounded",d.className="text-sm text-gray-500 mt-2",o.textContent="Ïû•Î∞îÍµ¨Îãà",i.textContent="Ï∂îÍ∞Ä",s.appendChild(o),s.appendChild(t),s.appendChild(e),s.appendChild(l),s.appendChild(i),s.appendChild(d),a.appendChild(s),n.appendChild(a),{cartDisp:t,sum:e,sel:l,addBtn:i,stockInfo:d}}function v(n){const{sel:a,productList:s}=n;a.innerHTML="",s.forEach(function(o){let t=document.createElement("option");t.value=o.id,t.textContent=o.name+" - "+o.val+"Ïõê",o.q===0&&(t.disabled=!0),a.appendChild(t)})}function C(n){const{stockInfo:a,productList:s}=n;let o="";s.forEach(t=>{t.q<5&&(o+=`${t.name}: ${t.q>0?`Ïû¨Í≥† Î∂ÄÏ°± (${t.q}Í∞ú ÎÇ®Ïùå)`:"ÌíàÏ†à"}
`)}),a.textContent=o}const q=n=>{const{totalAmt:a,sum:s}=n;let o=Math.floor(a/1e3),t=document.getElementById("loyalty-points");t||(t=document.createElement("span"),t.id="loyalty-points",t.className="text-blue-500 ml-2",s.appendChild(t)),t.textContent="(Ìè¨Ïù∏Ìä∏: "+o+")"};function h(n){const{cartDisp:a,sum:s,productList:o}=n;let t=0,e=0,l=a.children,i=0;for(let r=0;r<l.length;r++)(function(){let u;for(let m=0;m<o.length;m++)if(o[m].id===l[r].id){u=o[m];break}let f=parseInt(l[r].querySelector("span").textContent.split("x ")[1]),y=u.val*f,p=0;e+=f,i+=y,f>=10&&(u.id==="p1"?p=.1:u.id==="p2"?p=.15:u.id==="p3"?p=.2:u.id==="p4"?p=.05:u.id==="p5"&&(p=.25)),t+=y*(1-p)})();let d=0;if(e>=30){let r=t*.25,u=i-t;r>u?(t=i*(1-.25),d=.25):d=(i-t)/i}else d=(i-t)/i;if(new Date().getDay()===2&&(t*=1-.1,d=Math.max(d,.1)),s.textContent="Ï¥ùÏï°: "+Math.round(t)+"Ïõê",d>0){let r=document.createElement("span");r.className="text-green-500 ml-2",r.textContent="("+(d*100).toFixed(1)+"% Ìï†Ïù∏ Ï†ÅÏö©)",s.appendChild(r)}n.totalAmt=t,n.itemCnt=e,C(n),q(n)}function b(n){const{sel:a,cartDisp:s,productList:o}=n;let t=a.value,e=o.find(function(l){return l.id===t});if(e&&e.q>0){let l=document.getElementById(e.id);if(l){let i=parseInt(l.querySelector("span").textContent.split("x ")[1])+1;i<=e.q?(l.querySelector("span").textContent=e.name+" - "+e.val+"Ïõê x "+i,e.q--):alert("Ïû¨Í≥†Í∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§.")}else{let i=document.createElement("div");i.id=e.id,i.className="flex justify-between items-center mb-2",i.innerHTML="<span>"+e.name+" - "+e.val+'Ïõê x 1</span><div><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+e.id+'" data-change="-1">-</button><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+e.id+'" data-change="1">+</button><button class="remove-item bg-red-500 text-white px-2 py-1 rounded" data-product-id="'+e.id+'">ÏÇ≠Ï†ú</button></div>',s.appendChild(i),e.q--}n.lastSel=t,h(n)}}function I(n,a){const{cartDisp:s,productList:o}=a;console.log("üõí cartDisp",s);let t=n.target;if(t.classList.contains("quantity-change")||t.classList.contains("remove-item")){let e=t.dataset.productId,l=document.getElementById(e),i=o.find(function(d){return d.id===e});if(t.classList.contains("quantity-change")){let d=parseInt(t.dataset.change),r=parseInt(l.querySelector("span").textContent.split("x ")[1])+d;r>0&&r<=i.q+parseInt(l.querySelector("span").textContent.split("x ")[1])?(l.querySelector("span").textContent=l.querySelector("span").textContent.split("x ")[0]+"x "+r,i.q-=d):r<=0?(l.remove(),i.q-=d):alert("Ïû¨Í≥†Í∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§.")}else if(t.classList.contains("remove-item")){let d=parseInt(l.querySelector("span").textContent.split("x ")[1]);i.q+=d,l.remove()}h(a)}}function L(n){const{productList:a,updateSelOpts:s}=n;setTimeout(function(){setInterval(function(){const o=a[Math.floor(Math.random()*a.length)];Math.random()<.3&&o.q>0&&(o.val=Math.round(o.val*.8),alert(`Î≤àÍ∞úÏÑ∏Ïùº! ${o.name}Ïù¥(Í∞Ä) 20% Ìï†Ïù∏ Ï§ëÏûÖÎãàÎã§!`),s(n))},3e4)},Math.random()*1e4)}function E(n){const{productList:a,updateSelOpts:s}=n;setTimeout(()=>{setInterval(()=>{if(n.lastSel){const o=a.find(t=>t.id!==n.lastSel&&t.q>0);o&&(alert(`${o.name}ÏùÄ(Îäî) Ïñ¥Îñ†ÏÑ∏Ïöî? ÏßÄÍ∏à Íµ¨Îß§ÌïòÏãúÎ©¥ 5% Ï∂îÍ∞Ä Ìï†Ïù∏!`),o.val=Math.round(o.val*.95),s(n))}},6e4)},Math.random()*2e4)}function S(){const n=x();c.cartDisp=n.cartDisp,c.sum=n.sum,c.sel=n.sel,c.addBtn=n.addBtn,c.stockInfo=n.stockInfo,c.productList=g,v(c),h(c),c.addBtn.addEventListener("click",()=>b(c)),c.cartDisp.addEventListener("click",a=>I(a,c)),L(c),E(c)}S();
